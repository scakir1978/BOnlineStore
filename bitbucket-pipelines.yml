# Template docker-push

# This template allows you to build and push your docker image to a Docker Hub account.
# The workflow allows running tests, code linting and security scans on feature branches (as well as master).
# The docker image will be validated and pushed to the docker registry after the code is merged to master.

# Prerequisites: $DOCKERHUB_USERNAME, $DOCKERHUB_PASSWORD setup as deployment variables

image: atlassian/default-image:3

pipelines:
  custom:
    definitons:
        - step:
            name: Publish
            script:
              - cd BOnlineStore.Services
              - cd Definitions
              - cd BOnlineStore.Services.Definitions.Api              
              - docker build -t scakir1978/definitions.bonlinestore.com:latest .
              - docker push scakir1978/definitions.bonlinestore.com:latest
              - docker login -u scakir1978 -p Scag185489
            services:
              - docker
            caches:
              - docker        